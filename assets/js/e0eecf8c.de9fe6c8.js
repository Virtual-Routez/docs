(self.webpackChunkvirtual_routez_documentation=self.webpackChunkvirtual_routez_documentation||[]).push([[536],{8351:function(e,t,a){"use strict";a.r(t),a.d(t,{frontMatter:function(){return l},metadata:function(){return s},toc:function(){return p},default:function(){return m}});var n=a(2122),r=a(9756),i=(a(7294),a(3905)),o=["components"],l={title:"New Person",sidebar_label:"New Person",sidebar_position:1},s={unversionedId:"new_person_api",id:"new_person_api",isDocsHomePage:!1,title:"New Person",description:"---",source:"@site/docs/new_person_api.md",sourceDirName:".",slug:"/new_person_api",permalink:"/docs/new_person_api",editUrl:"https://github.com/johangriesel/virtual-routez/docs/new_person_api.md",version:"current",sidebar_label:"New Person",sidebarPosition:1,frontMatter:{title:"New Person",sidebar_label:"New Person",sidebar_position:1},sidebar:"tutorialSidebar",next:{title:"New Workstation",permalink:"/docs/new_workstation_api"}},p=[{value:"PREREQUISITES",id:"prerequisites",children:[]},{value:"API DATA",id:"api-data",children:[{value:"POST DATA",id:"post-data",children:[]},{value:"URL&#39;S TO BE USED",id:"urls-to-be-used",children:[]}]},{value:"AUTHENTICATION",id:"authentication",children:[]},{value:"API PARAMETERS",id:"api-parameters",children:[]},{value:"RESPONSES",id:"responses",children:[]},{value:"EXAMPLES",id:"examples",children:[]},{value:"IMPORTANT NOTES",id:"important-notes",children:[]}],d={toc:p};function m(e){var t=e.components,a=(0,r.Z)(e,o);return(0,i.kt)("wrapper",(0,n.Z)({},d,a,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("hr",null),(0,i.kt)("p",null,"In this section, we will be looking at how to create a Person on Virtual RouteZ via an API call. A Person is a\ncompulsory requirement when using the new event API call, and therefore the person involved in an event must be created\nprior to logging an event that is linked to them."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"In this section we will look at:")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"#prerequisites"},"Prerequisites")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"#api-data"},"API Data")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"#authentication"},"Authentication")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"#api-parameters"},"API Parameters")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"#responses"},"Responses")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"#examples"},"Examples"))),(0,i.kt)("h2",{id:"prerequisites"},"PREREQUISITES"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Below is what you will need in order to start using API's on Virtual RouteZ:")),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"A Virtual RouteZ account for your organisation"),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"#api-data"},"A Valid API Key")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"#api-parameters"},"The first and last name of this person")),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("a",{parentName:"li",href:"#api-parameters"},"An ExternalUid"))),(0,i.kt)("blockquote",null,(0,i.kt)("p",{parentName:"blockquote"},"If you do not have a Virtual RouteZ account for your organisation, you can email ",(0,i.kt)("a",{parentName:"p",href:"mailto:Francois@Ideco.co.za"},"Francois@Ideco.co.za")," to obtain one.")),(0,i.kt)("h2",{id:"api-data"},"API DATA"),(0,i.kt)("h3",{id:"post-data"},"POST DATA"),(0,i.kt)("p",null,"This type of data will be Post, which is the HTTP method that is designed to send loads of data to a server from a\nspecified resource. In this case, you will be sending (Posting) data to the Virtual RouteZ server."),(0,i.kt)("h3",{id:"urls-to-be-used"},"URL'S TO BE USED"),(0,i.kt)("p",null,"The URL that you will use to post to will be ",(0,i.kt)("a",{parentName:"p",href:"https://web.virtualroutez.app/api/external_person/newPerson"},"https://web.virtualroutez.app/api/external_person/newPerson"),"."),(0,i.kt)("h2",{id:"authentication"},"AUTHENTICATION"),(0,i.kt)("p",null,"In order to obtain authentication to be able to post to Virtual RouteZ, you will require:"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"A Valid API Key:"),'\nTo authenticate, add an "api_key" header to your API request that contains an API Key. This API key will be provided to\nyou by Virtual RouteZ.'),(0,i.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"Example Header:")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"POST ",(0,i.kt)("a",{parentName:"p",href:"https://web.virtualroutez.app/api/external_person/newPerson"},"https://web.virtualroutez.app/api/external_person/newPerson")),(0,i.kt)("p",{parentName:"div"},"Authorization: API Key"))),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"A Body:"),"\nThe body for this request will be ",(0,i.kt)("inlineCode",{parentName:"p"},"new_person_json_encoded_object"),"."),(0,i.kt)("h2",{id:"api-parameters"},"API PARAMETERS"),(0,i.kt)("p",null,"Now that we understand the authentication requirements and URL, let's have a look at the parameters in this API Payload."),(0,i.kt)("table",null,(0,i.kt)("thead",{parentName:"table"},(0,i.kt)("tr",{parentName:"thead"},(0,i.kt)("th",{parentName:"tr",align:null},"PARAMETER"),(0,i.kt)("th",{parentName:"tr",align:null},"DESCRIPTION"),(0,i.kt)("th",{parentName:"tr",align:null},"TYPE"),(0,i.kt)("th",{parentName:"tr",align:null},"COMPULSORY"))),(0,i.kt)("tbody",{parentName:"table"},(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"FirstName"),(0,i.kt)("td",{parentName:"tr",align:null},'This is the first name of the person being created. For example, if we were creating a person for someone who is working at a workstation performing an operation, "John" could be the FirstName.'),(0,i.kt)("td",{parentName:"tr",align:null},"String"),(0,i.kt)("td",{parentName:"tr",align:null},"Yes")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"LastName"),(0,i.kt)("td",{parentName:"tr",align:null},'This is the first name of the person being created. For example, if we were creating a person for someone who is working at a workstation performing an operation, "Doe" could be the LastName.'),(0,i.kt)("td",{parentName:"tr",align:null},"String"),(0,i.kt)("td",{parentName:"tr",align:null},"Yes")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"IdNumber"),(0,i.kt)("td",{parentName:"tr",align:null},"This is the ID number of the person being created."),(0,i.kt)("td",{parentName:"tr",align:null},"String"),(0,i.kt)("td",{parentName:"tr",align:null},"No")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"EmailAddress"),(0,i.kt)("td",{parentName:"tr",align:null},'This is the email address of the person being created. For example, if we were creating a person for someone who is working at a workstation performing an operation, "',(0,i.kt)("a",{parentName:"td",href:"mailto:John@applefarming.com"},"John@applefarming.com"),'" could be the EmailAddress.'),(0,i.kt)("td",{parentName:"tr",align:null},"String"),(0,i.kt)("td",{parentName:"tr",align:null},"No")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"ExternalUid"),(0,i.kt)("td",{parentName:"tr",align:null},'This is the unique identifier of the person being created. For example, if we were creating a person for someone who is working at a workstation performing an operation, "JHNDOE" could be the ExternalUid.'),(0,i.kt)("td",{parentName:"tr",align:null},"String"),(0,i.kt)("td",{parentName:"tr",align:null},"Yes")),(0,i.kt)("tr",{parentName:"tbody"},(0,i.kt)("td",{parentName:"tr",align:null},"OrganisationRole"),(0,i.kt)("td",{parentName:"tr",align:null},'This is the role that this person has within the organisation. For example, if we were creating a person for someone who is harvesting apples, "Harvester" could be the OrganisationRole.'),(0,i.kt)("td",{parentName:"tr",align:null},"String"),(0,i.kt)("td",{parentName:"tr",align:null},"No")))),(0,i.kt)("h2",{id:"responses"},"RESPONSES"),(0,i.kt)("p",null,"Each API call will return a response of either successful or unsuccessful. Below are the responses you may receive with\nthis API call."),(0,i.kt)("h4",{id:"successful-responses"},"SUCCESSFUL RESPONSES:"),(0,i.kt)("p",null,"If an API call has run successfully, the response below will be given:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n    "Result": "Success",\n    "AuthenticationToken": "123456789987456321",\n    "Message": "The people have been successfully added."\n}\n')),(0,i.kt)("h4",{id:"unsuccessful-responses"},"UNSUCCESSFUL RESPONSES:"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Missing Information"),"\nIf an API call has not run successfully and a parameter was missing from the payload, the response below will be given:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},' {\n  "Result": "Failed",\n  "AuthenticationToken": "123456789987456321",\n  "Message": "The following attributes were of the wrong type or blank.",\n  "Attributes": [\n    "FirstName"\n  ]\n}\n')),(0,i.kt)("p",null,"As you can see in the above example, the FirstName was not provided, and as it is a compulsory parameter, resulted in a\nfailed response."),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Not Authorised:"),"\nIf an API key is not valid for this event, the below error will be given:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "Result": "Failed",\n  "Message": "Not authorized."\n}\n')),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Person Already Exists:"),"\nIn this instance, an error is received as a person for this organisation already exists with the ExternalUid number\nprovided."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "Result": "Failed",\n  "AuthenticationToken": "333bf3a512752b68112d0360170c1ec4",\n  "Message": "The following People already exist in the system.",\n  "PersonUid": [\n    "JHNDOE"\n  ]\n}\n')),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"API Key Is Not Linked To A Valid Organisation"),"\nWhen the API Key does not link to an organisation that is allowed to generate API Calls for Virtual RouteZ, the\nfollowing error will be received:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "Result": "Failed",\n  "AuthenticationToken": "12345678987456322",\n  "Message": "ApiKey provided is not linked to a valid organisation."\n}\n')),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Same Payload Requested Less Than A Minute Ago:"),"\nWhen the exact same payload is run in less than a minute later than it was previously run, the following error will be\nreceived:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "Result": "Failed",\n  "AuthenticationToken": "12345678987456322",\n  "Message": "Exact same payload requested within a minute ago. Request terminated."\n}\n')),(0,i.kt)("h2",{id:"examples"},"EXAMPLES"),(0,i.kt)("h4",{id:"create-a-person-example"},"Create a Person Example"),(0,i.kt)("p",null,"If we were to create a workstation for an apple farm, we could do so with this API call."),(0,i.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"Below is an easy to read example:")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},(0,i.kt)("strong",{parentName:"p"},"First Name:")," John"),(0,i.kt)("p",{parentName:"div"},(0,i.kt)("strong",{parentName:"p"},"Last Name:")," Doe"),(0,i.kt)("p",{parentName:"div"},(0,i.kt)("strong",{parentName:"p"},"ExternalUid:")," JHNDOE"),(0,i.kt)("p",{parentName:"div"},(0,i.kt)("strong",{parentName:"p"},"Id Number:")," 1212556635889"),(0,i.kt)("p",{parentName:"div"},(0,i.kt)("strong",{parentName:"p"},"Email Address:")," ",(0,i.kt)("a",{parentName:"p",href:"mailto:Johndoe@applefarmers.com"},"Johndoe@applefarmers.com")),(0,i.kt)("p",{parentName:"div"},(0,i.kt)("strong",{parentName:"p"},"OrganisationRole:")," Harvester"))),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Payload to achieve this:")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "api_key": "123kjhnmk12345668422",\n  "new_person_json_encoded_object": [\n      {\n        "FirstName": "John",\n        "LastName": "Doe",\n        "IdNumber": "1212556635889",\n        "EmailAddress": "Johndoe@applefarmers.com",\n        "ExternalUid": "JHNDOE",\n        "OrganisationRole": "Harvester"\n      }\n  ]\n}\n')),(0,i.kt)("h4",{id:"person-no-organisationrole-emailaddress-or-idnumber-example"},"Person No OrganisationRole, EmailAddress or IdNumber Example"),(0,i.kt)("p",null,"If we wanted to add a person, without an OrganisationRole, EmailAddress or IdNumber, it is possible to do this by\nleaving these parameters out of the API call."),(0,i.kt)("div",{className:"admonition admonition-note alert alert--secondary"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"}))),"note")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},(0,i.kt)("strong",{parentName:"p"},"First Name:")," John"),(0,i.kt)("p",{parentName:"div"},(0,i.kt)("strong",{parentName:"p"},"Last Name:")," Doe"),(0,i.kt)("p",{parentName:"div"},(0,i.kt)("strong",{parentName:"p"},"ExternalUid:")," JHNDOE"))),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Payload to achieve this:")),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-json"},'{\n  "api_key": "123kjhnmk12345668422",\n  "new_person_json_encoded_object": [\n    {\n      "FirstName": "John",\n      "LastName": "Doe",\n      "ExternalUid": "JHNDOE"\n    }\n  ]\n}\n')),(0,i.kt)("h2",{id:"important-notes"},"IMPORTANT NOTES"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"If the person referenced in the payload does exist, this API call will not work."),(0,i.kt)("li",{parentName:"ul"},"If the person referenced in the payload does not exist in the system, a new one will be created."),(0,i.kt)("li",{parentName:"ul"},'If you try to submit the exact same payload within a minute of the last submission, you will get an error: "Exact same\npayload requested within a minute ago. Request terminated.')),(0,i.kt)("hr",null))}m.isMDXComponent=!0}}]);